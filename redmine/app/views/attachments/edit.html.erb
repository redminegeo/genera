<%if password_type||=false%>
  <h2><%= l(:label_edit_signature) %></h2> 
<%else%>
  <h2><%= l(:label_edit_attachments) %></h2> 
<%end%>
<%= error_messages_for *@attachments %>

<%= form_tag(container_attachments_path(@container), :method => 'patch') do %>
  <%= back_url_hidden_field_tag %>
  <div class="box attachments">
  <table>
  <% @attachments.each do |attachment| %>
    <tr>
      <td colspan="2"> 
        <span class="icon icon-attachment"><%= attachment.filename_was %></span>
        <span class="size">(<%= number_to_human_size attachment.filesize %>)</span>
        <span class="author"><%= h(attachment.author) %>, <%= format_time(attachment.created_on) %></span>
      </td>
    </tr>
    <tr id="attachment-<%= attachment.id %>">
      <%if password_type||=false%> <!-- @fjaneta ini -->
        <td></td>
        <td>
          <%= password_field_tag "attachments[#{attachment.id}][description]", Redmine::Ciphering.decrypt_text(attachment.description),:maxlength => 20,:minlength => 6,:size => 25,:required => true, :placeholder => l(:label_password) %>
          <%= password_field_tag "attachments[#{attachment.id}][confirmation]",'',:maxlength => 20,:minlength => 6, :size => 25,:required => true, :placeholder => l(:label_confirmation_detail) %>
      <%else%> <!-- @fjaneta fin -->
        <td><%= text_field_tag "attachments[#{attachment.id}][filename]", attachment.filename, :size => 40 %></td>
        <td>
          <%= text_field_tag "attachments[#{attachment.id}][description]", attachment.description, :size => 80, :placeholder => l(:label_optional_description) %>

      <%end%>
      </td>
    </tr>
  <% end %>
  </table>
  </div>
  <p>
    <%= submit_tag l(:button_save), {:onclick => 'return validate_password_for_Attachments()'} %>
    <%= link_to l(:button_cancel), back_url if back_url.present? %>
  </p>
<% end %>

<% content_for :header_tags do %>
  <%= javascript_include_tag 'attachments' %>
<% end %>